@model HMCodingWeb.Models.User;
@{
    Layout = "_LayoutLogin";
    ViewData["Title"] = "Đăng nhập";
    string returnUrl = ViewContext.HttpContext.Request.Query["ReturnUrl"];
}
    <div class="container_login" id="loginContainer">
        <form asp-action="Login" asp-controller="User" method="post" class="form_login mt-3">
            <div class="text-center">
                <div><img width="20" src="~/assets/icons/logo.png" alt=""></div>
            <b class="title_login">HM Coding</b>
            </div>
            <div class="textbox_login">
                <input type="hidden" name="ReturnUrl" id="ReturnUrl" value="@returnUrl" />
                <div class="form-floating mt-4">
                    @Html.TextBoxFor(x => x.Username, new { @class = "form-control", @placeholder = "Nhập tên đăng nhập" })
                    <label for="Username">Username</label>
                </div>
                @Html.ValidationMessageFor(x => x.Username, "", new {@class = "text-danger"})
                <div class="form-floating mt-4 position-relative">
                    @Html.TextBoxFor(x => x.Password, new { @class = "form-control", @placeholder = "Nhập mật khẩu", @type = "password" })
                <img style="display:none;width: 27px !important;position: absolute;right: 20px;top: 17px;" src="~/assets/icons/eye-open.svg" id="eye" />
                    <label for="Password">Password</label>
                </div>
                @Html.ValidationMessageFor(x => x.Password, "", new { @class = "text-danger" })
            </div>
            <div class="mt-3 text-right">
                <a class="text-right" id="forgotPasswordLink" asp-action="ForgetPassword" asp-controller="User">Quên mật khẩu?</a>
            </div>  
            <div class="text-right">
                <a class="text-right" id="signup" asp-action="Signup" asp-controller="User">Bạn chưa có tài khoản?</a>
            </div>
            <div class="text-center mt-3 mb-3">
                <button id="login" type="submit" class="btn btn-primary p-3" style="padding: 20px 16px; color: white;">Đăng nhập</button>
            </div>
        </form>
    </div>

@section Scripts{
    @if (ViewBag.Alert != null)
    {
        <script>
            showAlert("error", "Đăng nhập thất bại", "Username hoặc password không đúng!", false, false, 1000);
        </script>
    }
    <script>
        $('#Password').on('input', function () {
            if ($(this).val()) {
                $("#eye").css('display', 'block');
            }else{
                $("#eye").css('display', 'none');
            }
        });
        $("#eye").on('click', function () {
            let src = $(this).attr('src');
            if ($('#Password').attr('type') == 'password') {
                $('#Password').attr('type', 'text');
                $(this).attr('src', src.replace('open', 'close'));
            }
            else{
                $('#Password').attr('type', 'password');
                $(this).attr('src', src.replace('close', 'open'));
            }
        });
    </script>
}
    

